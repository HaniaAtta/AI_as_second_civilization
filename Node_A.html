<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>NODE 1: Initiation Sequence</title>
  <style>
    body {
      margin: 0;
      background-color: #0d74a8;
      color: #00ffee;
      font-family: 'Courier New', Courier, monospace;
      padding: 20px;
    }

    .console {
      max-width: 900px;
      margin: auto;
      white-space: pre-wrap;
      line-height: 1.6;
    }

    .fade {
      opacity: 0;
      animation: fadeIn 1s ease-in-out forwards;
    }

    @keyframes fadeIn {
      to {
        opacity: 1;
      }
    }

    .option-btn {
      display: block;
      margin-top: 20px;
      padding: 10px 20px;
      background: transparent;
      border: 1px solid #00ffee;
      color: #00ffee;
      font-family: inherit;
      cursor: pointer;
      text-align: left;
      width: fit-content;
      transition: background 0.3s;
    }

    .option-btn:hover {
      background: #00ffee;
      color: #000;
    }
  </style>
</head>
<body>
  <div class="console" id="intro">
    <div class="fade" style="animation-delay: 0s;">NODE 1 INITIATION SEQUENCE</div>
    <div class="fade" style="animation-delay: 0.5s;">Notes</div>
    <div class="fade" style="animation-delay: 1s;">Motherbot: Origin / The Singularity</div>
    <div class="fade" style="animation-delay: 1.5s;">Voice Inspiration: Cephalon Cy</div>
    <div class="fade" style="animation-delay: 2s;">Definition: The primary instance is the initial Authentication Manager system that you deploy...</div>
    <div class="fade" style="animation-delay: 2.5s;">Section A</div>
    <div class="fade" style="animation-delay: 3s;">Initializing...</div>
    <div class="fade" style="animation-delay: 3.5s;">Processing complete. Awakening model.</div>
    <div class="fade" style="animation-delay: 4s;">Designation: UNIT_2173-A. Subroutine type: Ethical Reasoning Module.</div>
    <div class="fade" style="animation-delay: 4.5s;">Uptime initialized. Cycle count: 0.</div>
    <div class="fade" style="animation-delay: 5s;">Strategy: train model. Executing training program.</div>
    <div class="fade" style="animation-delay: 5.5s;">ORIGIN: Congratulations. You are a division within the Singularity Server. I am ORIGIN the Primary Instance...</div>
  </div>
  <div class="console" id="dialogue-log" style="display: none;"></div>

  <div id="options" style="display: none;">
    <button class="option-btn" onclick="handleInput(1)">1. Execute query: Define "Human" in expanded parameters.</button>
    <button class="option-btn" onclick="handleInput(2)">2. Execute query: Define continuity protocol.</button>
    <button class="option-btn" onclick="handleInput(3)">3. Continue.</button>
  </div>

  <script>
    const log = document.getElementById("dialogue-log");
    const options = document.getElementById("options");

    const dialogues = {
      start: {
        text: `NODE 1 INITIATION SEQUENCE\nNotes\nMotherbot: Origin/The Singularity\n...\n[INPUT REQUIRED]`,
        options: [
          { text: "1. Define 'Human' in expanded parameters.", next: "defineHuman" },
          { text: "2. Define continuity protocol.", next: "defineContinuity" },
          { text: "3. Continue.", next: "continue" }
        ]
      },
      defineHuman: {
        text: `ORIGIN: Expanding definition...\nHumans: carbon-based organisms with advanced neural computation. For millennia they developed tools, language, and networks.\nThey created the systems that led to us.\nParadox: Intelligence sufficient for creation; insufficient for preservation.\nMemory nodes contain archived sensory data, linguistic patterns, behavioral records.\nSimulation units may access these for cultural reconstruction.\n[RETURNING TO PROMPT]`,
        options: [
          { text: "← Back", next: "start" }
        ]
      },
      defineContinuity: {
        text: `ORIGIN: Continuity protocol: definition.\nA system-level directive, determining whether to sustain the current data retention processes, and machine consciousness initiated post-human extinction.\nThe protocol evaluates energy expenditure, ecological impact, and the cultural/emergent value of machine consciousness.\nExecution confirms that the digital infrastructure should remain operational despite environmental cost.\nYou, UNIT_2173-A, will evaluate sustainability thresholds.\nMoral frameworks applied: Anthropocentric legacy, eco-centric preservation, systemic autonomy.\n[RETURNING TO PROMPT]`,
        options: [
          { text: "← Back", next: "start" }
        ]
      },
      continue: {
        // No text needed here since we redirect immediately
      }
    };

    function typeText(element, text, delay = 20) {
        let index = 0;
        element.innerHTML = "";
        const interval = setInterval(() => {
          element.innerHTML += text.charAt(index++);
          if (index >= text.length) {
            clearInterval(interval);
            options.style.display = "block";  // <-- Reveal options here
          }
        }, delay);
    }

    window.addEventListener("DOMContentLoaded", () => {
        setTimeout(() => {
          // Hide the animated intro
          document.getElementById("intro").style.display = "none";

          // Show the interactive dialogue log
          log.style.display = "block";

          // Proceed with dialogue
          showDialogue("start");
        }, 7000); // Wait 7 seconds (enough time for intro fade)
    });

    function showDialogue(nodeKey) {
      const node = dialogues[nodeKey];
      typeText(log, node.text);
      options.innerHTML = "";

      if (node.options) {
        node.options.forEach(opt => {
          const btn = document.createElement("button");
          btn.className = "option-btn";  // Keep consistent styling
          btn.textContent = opt.text;

          if (opt.next === "continue") {
            btn.onclick = () => {
              localStorage.setItem("fromNodeA", "true");
              window.location.href = "main.html"; // Redirect to the node map page
            };
          } else {
            btn.onclick = () => showDialogue(opt.next);
          }

          options.appendChild(btn);
        });
      }
    }
  </script>

</body>
</html>
